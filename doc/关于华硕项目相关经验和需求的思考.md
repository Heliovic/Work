# 关于华硕项目相关经验和需求的思考

华硕项目到目前大概告一个段落，以下对之前遇到的情况做一个简短的总结，希望在后续的华硕项目上能有所提高和改善。

---

## 内部研发工作
1，需求方面，华硕项目与其他项目有差异，其他项目自研的需求比较多或者是在新的Android平台上，把之前客户的需求做一次移植工作，这块需要对Android版本的差异进行分析可能就可以完成需求工作，华硕项目的需求，有一批需求是客户已经在其他平台（高通）已经修改完善过的，以patch的方式提供给我司合入，前期项目组做需求的时候，基本上处理方式都是想着把代码合入，缺少对patch功能的具体深入的理解，针对于需求，后续合入需求，有以下几点思考：

> * 拿到需求，先明白需求完成的什么功能，理解需求需要做到哪些功能
> * 平台是否已经满足此需求的功能，是否与需求工程师沟通，目前MTK平台已经针对此功能做过对应的处理。（有出现过其实平台已经有此功能，但是继续往上面合代码的情况）
> * 合入需求时，初期评估是否提供的patch是否兼容MTK，及时反馈出来
> * 需求合入后，从编译文件生成方面，从功能实现方面，多方面验证功能有没有合入成功（之前项目多次出现合入需求，只是简单的代码合入，甚至连编译效果都没有，也有功能并没有ok（认为是无法验证），也提交代码的情况）
> * 合入需求后对平台稳定性的波及范围分析，后续项目希望对应的工程师不仅要合入需求，更需要工程师对此功能块的整体代码的把握，此需要涉及的模块，主动去学习模块的框架，以及华硕提供的patch他们怎么修改此功能的优劣，这样对平台的稳定性以及后期项目的稳定性有很大的帮助。

2，故障方面
华硕项目出现的故障，很多问题虽然表现的AP层，但是都是需要进行深层次分析的，由于没有AP层的源码，对故障分析带来了相当大的困难，尤其后面做的281项目，很多故障大多数是针对GMS包提的，工程师调试的难度比以前的难度要提高，这样对我们工程师的技能要求就需要更上一层，内部进行分模块处理问题，模块故障的数量不均等，内部需要更多的机动工程师进行问题处理。针对280 与281 项目内部故障的处理，有如下几点思考：

> * 工程师拿到故障，首先要提炼出测试报出的故障的实质出问题的模块，按道理来说，研发工程师首先是一名优秀的测试工程师，需要有比测试同事更简练更快捷复现问题的方式，这样有利于定位问题模块。
> * 华硕项目AP层的故障，由于没有AP层源码，先进行故障简单的分析，如果是功能模块内的实现的功能，可能就需要华硕协助处理，如果此功能需要与framework进行深层次交互的，需要考虑，在其他外部条件相同的情况下，MTK平台此功能是非能够正常运行，不正常，就需要考虑我们当前项目运行环境相关的情况了。不能简单粗率的对华硕应用一出现问题就外放到华硕去处理。
> * 另外还有一种情况是，华硕功能里面调用平台的接口，在提交华硕处理之前，我们内部要思考，能否通过简单的demo程序来试验此接口是否完全，在AP无源码的情况，部分问题能够通过编写demo程序一定要多去写，多去试验。这点与第一点有点相似，需要多去思考，提炼问题的实质。
> * 上面说的公用接口相关的，还有一类情况是，测试提出的故障，其实可能就是平台设计如此的，表现在asus的应用里面，这类也可以写demo模拟华硕应用的相关行为（这类出现在应用跳转，界面调用比较多）
> * 故障log分析方面，由于华硕项目AP层无源码，无法像有源码的应用调试一样，在出现异常或者功能代码周围添加log进行调试，工程师调试时，无法在AP层添加log，或者在目前测试提供的mtklog很难提炼出关键点，看log就像爬山，需要拿到有效log的情况下，深入的对当前时间点周围进行不断的深入思考，诸如从event log和sys log 复现测试的操作步骤，结合mainlog和radiolog深入的去抓细节点，发现目前目前内部工程师分析log缺少一种坚持，尤其是自己抓取的必现的log，需要多次深入的进行思考。
> * 从framework层log开分析问题，由于之前调试在AP层比较多，部分同事对framework下调试不是很熟练，华硕项目如果可以从接口层添加log来调试的，需要多操作

---
## 工作沟通

研发工作沟通比较重要，不管是与内部软件沟通，以及驱动部分沟通，还是与管理人员沟通，甚至于华硕客户进行沟通，决定了工作能否顺利完成，以及工作是否顺心。

> *  内部软件沟通，前期工作时，闷声造大船的比较多，内部研发工程师需要在自己对问题进行充分的了解后，可以及时与上级或者资深工程师进行探讨，探讨需求和问题的分析是否有效，是否是一种常规的处理方式，是否有更有效的调试方式。尤其在处理需求的时候需要更注意此问题。
> * 与驱动沟通，部分故障涉及到驱动器件相关的处理，部分问题在驱动和软件之前并没有明显的故障，这时候需要工程师首先明白针对此问题，多思考一下，软件上层可以处理什么，上层从哪些方面来证明我们已经处理完善，以及与驱动沟通前，你想咨询和协助的点是哪些。先明白自己需要别人做什么，再进行沟通。
> * 与开发经理沟通，华硕问题由于应用层调试比较困难，部分工程师会把问题押在自己手里做研究，等到项目紧急时段时，开发经理催问题才爆出来，这样给自己带了相当大的被动，后续华硕项目，建议工程师与开发经理及时反馈问题的进展和难点，及时定位问题需要帮忙的点。
> * 与MTK沟通，华硕项目提了许许多多的eservice，部分工程师提了eservice之后，还没提炼出问题的实质，以完成任务的态度提了eservice给MTK，建议后续华硕项目，是否需要给MTK提eservice，都需要加上个人对问题的分析和见解，这样才能得到更快捷和更准确的定位。
> * 与华硕沟通方面，前期与华硕进行邮件沟通的时候，工程师没有注意的邮件形象（诸如字体，格式这块，联系方式），以及邮件的内容（三步，1，目前问题是什么，2，我们内部从log发面，或者代码实质或者通过写demo证明哪些方面，3，需要华硕协助的具体内容，或者我们针对此问题，我们的疑问点）。针对邮件内容的第二步，我们需要多思考，多与资深工程师沟通，毕竟代表我们的内部研发形象，不能跟华硕工程师一样，随便想一封邮件就往外发。

--- 
## 研发工程师自我提高
华硕项目难度比较大，目前项目组是分模块来处理事情，华硕项目对具体模块的掌握可能涉及的需要更加全面，同时对工程师的对不同模块的交互也需要有一定的了解，个人觉得工程师需要有一个比较熟悉深入的模块，也需要工程师对其他有兴趣的模块进行大概的了解，能够深入了解多个模块那就是更好了，也就是对于华硕此类项目，我们需要更多的机动工程师，工作不局限模块，学习可以按照自己的兴趣爱好进行深入了解，个人觉得工作模块与学习模块是不冲突的。做过华硕项目之后，对个人提交有如下建议：

> * 部分工程师反馈，做华硕项目，感觉天天都是在分析log，天天都在是跟log打交道，个人觉得不是如此，反倒觉得华硕项目可以写的代码太多，需要我们对故障里面的问题进行提炼，（诸如获取联系人群组失败的，应用显示在界面最上层（刘洋），联系人数据库导入查询失败的情况（张涛），墙纸设置差异，以及触摸无反应（莫洪武），activity启动异常（王朝斌），应用安装卸载故障（许林超）等，以及还有诸多没精力来写的demo应用），通过对故障的进行实质的提炼，通过写demo的方式来多方面来证明一些论证。同时又能提交工程师的编码的能力。
> * 前面提到过做需求需要对模块周边比较整体的了解，做华硕项目需要对模块关联的知识的要求更高，作为一个工程师来说，需要考虑的是，上级分配了一个模块，或者自己找到了一个比较有兴趣爱好的模块以后，怎么把模块做充分，怎么样挖掘更多的周边的知识点，来给目前的模块做的更加融会贯通。其实个人可以通过查询众多的书籍，或者针对经典的书籍，重复反复的理解重点知识块，我相信，针对同一个章节进行多次反复查阅以及思考，每次都会有不同的体会，这样才能更全面的去体会模块的功能。

目前华硕项目组人力还是比较缺乏，尤其缺少机动工程师，需要工程师更加主动，更加努力的对源码的深入了解，做好了工作流程以及沟通方面的事情后，项目能否顺利的进行，在于项目组人员的具体功力了，所以希望后续领导层给员工更多进行深入研究源码的机会，由于个人能力有限，以上是个人对华硕项目的简单的思考和理解，往指教。




